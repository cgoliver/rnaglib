# Data README


## Graph Format

Each graph contains structure information for one model of a PDB entry
containing at least one RNA chain.

Graphs are stored in `JSON` node-link format which can be loaded by
[networkx](https://networkx.org/documentation/stable/reference/readwrite/generated/networkx.readwrite.json_graph.node_link_data.html#networkx.readwrite.json_graph.node_link_data).

All data comes from the output of `x3dna-dssr` which can be downloaded
[here](https://x3dna.org/) and our custom interface extraction tools.


Data sources to integrate:

* DSSP for protein structure info
* GO annotations
* RFAM annotations
* PDB metadata

### Creating a graph

TODO: will need to make a script that calls the DSSR annotator and Jonathan's
scripts.

### Loading a graph

Graphs are dumped as JSONs in the node-link format.

```python
import json
from networkx.readwrite.json_graph import node_link_graph

G  = node_link_graph(open('path/to/graph', 'r'))
```

### Graph

TODO

### Nodes 

#### Node IDs

Node IDs are strings in the form `[pdb id].[chain name].[residue number]`.

#### Node Data

To access node data dictionary:

```python
G.nodes[<node_id>]
```

* `'index'`: (int), relative index along chain starting at 1 (e.g. `1`)
* `'index_chain'`: (int) 26 (e.g. `26`)
* `'chain_name'`: (str), name of chain. (e.g. `A`)
* `'nt_resnum'`: (int), residue number according to PDB. (e.g. `101`)
* `'nt_name'`: (str), nucleotide name  (e.g. `G`)
* `'nt_code'`: (str), (e.g. `'U'`)
* `'nt_id'`: (str) unique nucleotide ID generated by DSSR. `<chain name>.<nt name><nt_resnum>` (e.g. `'A.U42'`),
* `'nt_type'`: (str) molecule type of residue (e.g. `'RNA'`)
* `'dbn':` (str) dot-bracket notation for the residue (e.g. `')'`)

 'summary': "anti,~C3'-endo,BI,canonical,non-pair-contact,helix,stem,coaxial-stack",
 'alpha': 139.692,
 'beta': -168.508,
 'gamma': -171.292,
 'delta': 87.027,
 'epsilon': -173.958,
 'zeta': -72.041,
 'epsilon_zeta': -101.917,
 'bb_type': 'BI',
 'chi': -171.989,
 'glyco_bond': 'anti',
 'C5prime_xyz': [-1.343, 8.453, 1.288],
 'P_xyz': [-0.13, 10.515, 0.185],
 'form': 'A',
 'ssZp': 4.41,
 'Dp': 4.404,
 'splay_angle': 21.6,
 'splay_distance': 3.612,
 'splay_ratio': 0.199,
 'eta': 169.652,
 'theta': -167.457,
 'eta_prime': -176.189,
 'theta_prime': -167.27,
 'eta_base': -135.681,
 'theta_base': -141.003,
 'v0': 8.194,
 'v1': -28.393,
 'v2': 36.831,
 'v3': -33.233,
 'v4': 15.803,
 'amplitude': 37.053,
 'phase_angle': 6.267,
 'puckering': "C3'-endo",
 'sugar_class': "~C3'-endo",
 'bin': '33t',
 'cluster': '1c',
 'suiteness': 0.698,
 'filter_rmsd': 0.103,
 'frame': {'rmsd': 0.006,
  'origin': [-4.856, 8.564, -1.171],
  'x_axis': [0.922, 0.386, -0.006],
  'y_axis': [0.098, -0.25, -0.963],
  'z_axis': [-0.374, 0.888, -0.269],
  'quaternion': [0.592, -0.781, -0.155, 0.122]},
 'sse': {'sse': None},
 'rbp': None}


### Edge data

